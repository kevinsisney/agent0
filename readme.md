

# About

This is a Discord bot written in Python that uses free LLMs available at [OpenRouter.ai](https://openrouter.ai/). 
The goal of the project is to have fun writing an AI agent while getting some hands-on experience with popular AI frameworks and libraries. 
Most of the code here was generated by Cursor Agent. And that's another goal, to do as little coding as possible. Let AI do the grunt work!

Familiarity with Python and its ecosytem is assumed and will be enough to run the Discord bot locally.

With a little DevOps knowledge, you can build and deploy your bot as container to a cloud service of your choice to ensure your bot is always available.


# What You'll Need

- A Discord server & API token - FREE!
- An OpenRouter account & API key - FREE!
- A place to host the bot - INEXPENSIVE.


# Setting Up Your Environment

If you don't know how to configure a Python virtual environment, you're going to have to learn how
to do that first. PyCharm is a very nice IDE for Python and the community edition is free so that
may be a good place to start.

NOTE: You can run the bot locally in Docker without having to configure a virtual environment.


# Sandbox Chat

Run the bot running locally using its CLI based chat interface. You'll just need an OpenRouter API key for this so go get one and add it to your .env file.

Try to run the sandbox chat interface:

    python3 src/main.py --sandbox

Or use Docker:

    docker compose build
    docker compose run sandbox


# Running the Discord Bot

To run the bot in Discord, you'll need an API token from the 
[Discord Developer Portal](https://discord.com/login?redirect_to=%2Fdevelopers%2Fapplications).

There are plenty of tutorials on how to set up a Discord bot, but here's some tips:

1. Create an application.

2. On the Bot Tab:
  - Set your bot an icon and name.
  - Optionally, if you want a private bot, turn off Public Bot. You may also have to set Install Link under the Installation tab to None to save your changes.
  - Enable intents for the bot: Presence, Server Members, Message Content intents. Your bot can't do much without these.
  - Generate the API key by clicking the "Reset Token" button.
  - Copy the API key and paste it into your .env file as DISCORD_TOKEN.

Now you need to invite your bot to your server.

3. On the OAuth2 tab:
  - Check the 'bot' scope.
  - Copy the OAuth2 URL and paste it into a browser.
  - Select your server and click "Authorize".

Now trying running the bot locally with:

    python3 src/main.py

or with Docker:

    docker compose run discord


# Deploying the Bot

We will, of course, have to host the bot somewhere.  There are many ways to do that.  In this case, I'm optimizing for simplicity and cost. This is not a high-availability, enterprise-grade
solution but it's good enough for a fun project.

This solution should work for any (Debian) Linux host that you have ssh and root access to. 
In my case, I'm running Ubuntu 24 on an AWS EC2 t3.nano for about $3.60/month.

1. Install Docker on your server

    sudo apt-get update && sudo apt-get install docker.io

2. then add your user account to the docker group so that you run Docker commands without sudo. 

    sudo usermod -aG docker $USER

3. On your workstation, tell your Docker client use the Docker service running on your server.

    docker context create my-server --docker "host=ssh://your-user@your-server-ip"

4. Now you can deploy and run the container on your server.

    docker-compose --context my-server up discord -d

5. Verify that the bot is running on your server.

    docker-compose --context my-server ps


# Resources

[Cursor](https://www.cursor.com/)

[LangChain Python](https://github.com/langchain-ai/langchain)

[Discord Python](https://github.com/discord/discord.py)

[LangChain OpenRouter](https://github.com/langchain-ai/langchain-openrouter)
